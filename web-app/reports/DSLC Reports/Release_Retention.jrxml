<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Release_Retention" language="groovy" pageWidth="612" pageHeight="792" whenNoDataType="AllSectionsNoDetail" columnWidth="504" leftMargin="54" rightMargin="54" topMargin="54" bottomMargin="54">
	<property name="ireport.zoom" value="1.210000000000003"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="243"/>
	<import value="com.ibm.icu.*"/>
	<import value="report.utils.ReportUtility"/>
	<import value="apache.commons.lang.*"/>
	<parameter name="documentNumber" class="java.lang.String"/>
	<parameter name="tradeServiceId" class="java.lang.String"/>
	<parameter name="processDate" class="java.lang.String"/>
	<parameter name="beneficiaryName" class="java.lang.String"/>
	<parameter name="beneficiaryAddress" class="java.lang.String"/>
	<parameter name="biddingDate" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="attentionName" class="java.lang.String"/>
	<parameter name="attentionNamePosition" class="java.lang.String"/>
	<parameter name="applicantName" class="java.lang.String"/>
	<parameter name="applicantAddress" class="java.lang.String"/>
	<parameter name="purposeOfStandby" class="java.lang.String"/>
	<parameter name="bank" class="java.lang.String"/>
	<parameter name="bankBranch" class="java.lang.String"/>
	<parameter name="bankAddress" class="java.lang.String"/>
	<parameter name="currency" class="java.lang.String"/>
	<parameter name="amount" class="java.lang.String"/>
	<parameter name="city" class="java.lang.String"/>
	<parameter name="expiryPeriod" class="java.lang.String"/>
	<parameter name="expiryDate" class="java.lang.String"/>
	<parameter name="proprietor" class="java.lang.String"/>
	<parameter name="authorizedSignatory1" class="java.lang.String"/>
	<parameter name="authorizedSignatoryPosition1" class="java.lang.String"/>
	<parameter name="authorizedSignatory2" class="java.lang.String"/>
	<parameter name="authorizedSignatoryPosition2" class="java.lang.String"/>
	<queryString>
		<![CDATA[select currency, amount from tradeservice where tradeserviceid=$P{tradeServiceId}]]>
	</queryString>
	<field name="CURRENCY" class="java.lang.String"/>
	<field name="AMOUNT" class="java.math.BigDecimal"/>
	<variable name="AMOUNT_IN_WORDS" class="java.lang.String">
		<variableExpression><![CDATA[ReportUtility.convert($F{AMOUNT}, $F{CURRENCY}).toUpperCase() + " ONLY "]]></variableExpression>
		<initialValueExpression><![CDATA[ReportUtility.convert($F{AMOUNT}, $F{CURRENCY}).toUpperCase() + " ONLY "]]></initialValueExpression>
	</variable>
	<variable name="BIDDING_DATE" class="java.lang.String">
		<variableExpression><![CDATA[($P{biddingDate}=="" || $P{biddingDate}=="undefined" || $P{biddingDate}==null) ? "" : new SimpleDateFormat("MMMMM dd, yyyy").format(new Date($P{biddingDate}))]]></variableExpression>
		<initialValueExpression><![CDATA[($P{biddingDate}=="" || $P{biddingDate}=="undefined" || $P{biddingDate}==null) ? "" : new SimpleDateFormat("MMMMM dd, yyyy").format(new Date($P{biddingDate}))]]></initialValueExpression>
	</variable>
	<variable name="PROCESS_DATE" class="java.lang.String">
		<variableExpression><![CDATA[new SimpleDateFormat("MMMMM dd, yyyy").format(new Date($P{processDate}))]]></variableExpression>
		<initialValueExpression><![CDATA[new SimpleDateFormat("MMMMM dd, yyyy").format(new Date($P{processDate}))]]></initialValueExpression>
	</variable>
	<variable name="PROCESS_DATE2" class="java.lang.String">
		<variableExpression><![CDATA[new SimpleDateFormat("dd'th Day Of' MMMMM, yyyy").format(new Date($P{processDate}))]]></variableExpression>
		<initialValueExpression><![CDATA[new SimpleDateFormat("dd'th Day Of' MMMMM, yyyy").format(new Date($P{processDate}))]]></initialValueExpression>
	</variable>
	<variable name="EXPIRY_DATE" class="java.lang.String">
		<variableExpression><![CDATA[new SimpleDateFormat("MMMMM dd, yyyy").format(new Date($P{expiryDate}))]]></variableExpression>
		<initialValueExpression><![CDATA[new SimpleDateFormat("MMMMM dd, yyyy").format(new Date($P{expiryDate}))]]></initialValueExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<summary>
		<band height="575">
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="190" width="504" height="250"/>
				<box topPadding="10"/>
				<textElement textAlignment="Justified" verticalAlignment="Top" markup="html">
					<font fontName="SansSerif" size="9" isUnderline="false" isStrikeThrough="false" pdfFontName="Times-Roman"/>
					<paragraph lineSpacing="Single" firstLineIndent="20"/>
				</textElement>
				<textFieldExpression><![CDATA["In accordance with the provisions of the conditions of contract, Art. D. 5 ii. (\"Release of Retention Money\") of the above-mentioned Contract, " + $P{applicantName} + " with business address at " + $P{applicantAddress} + " (hereinafter called \"the Contractor\") shall deposit with the " + $P{beneficiaryName} + " represented by " + $P{attentionName} + ", " + $P{attentionNamePosition} + ", a Bank Guarantee to guarantee his workmanship and compliance to the requirements of plans and specifications under the said Clause of the contract in an amount of " + $V{AMOUNT_IN_WORDS} + " (" + $P{currency} + $P{amount} + ")."+
"<br/><br/>"+
"We, the " + $P{bank} + ", " + $P{bankBranch} + ", as instructed by the Contractor, agree unconditionally and irrevocably to guarantee as primary obligator and not as Surety merely, the payment to the " + $P{beneficiaryName} + " represented by " + $P{attentionName} + ", " + $P{attentionNamePosition} + " for the " + $P{purposeOfStandby} + " on his first demand without whatsoever right of objection on our part and without his first claim to the Contractor, in the amount not exceeding " + $V{AMOUNT_IN_WORDS} + " (" + $P{currency} + $P{amount} + ")."+
"<br/><br/>"+
"This Guarantee shall remain valid and in full effect from the date of the Release of Retention under the Contract until the " + $P{beneficiaryName} + " represented by " + $P{attentionName} + " as " + $P{attentionNamePosition} + " for the " + $P{purposeOfStandby} + ", issue a Certificate of Acceptance 365 after issuance of Certificate of Completion or " + $V{EXPIRY_DATE} + " whichever comes first."]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="0" width="504" height="15"/>
				<textElement textAlignment="Justified" markup="html">
					<font size="9" isStrikeThrough="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{beneficiaryName}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="15" width="175" height="50"/>
				<textElement markup="html">
					<font size="9" isStrikeThrough="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{beneficiaryAddress}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="177" y="440" width="150" height="30"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font size="9" isUnderline="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA["Yours Truly,"]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="65" width="35" height="15"/>
				<textElement textAlignment="Justified" markup="html">
					<font size="9" isStrikeThrough="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA["ATTN:"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="327" y="485" width="177" height="50"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font size="9" isUnderline="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{authorizedSignatoryPosition1}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="327" y="470" width="177" height="15"/>
				<box>
					<bottomPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="9" isUnderline="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{authorizedSignatory1}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="35" y="65" width="469" height="15"/>
				<textElement textAlignment="Justified" markup="html">
					<font size="9" isStrikeThrough="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{attentionName}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="35" y="80" width="469" height="20"/>
				<textElement textAlignment="Justified" markup="html">
					<font size="9" isStrikeThrough="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{attentionNamePosition}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="100" width="504" height="75"/>
				<textElement textAlignment="Center" markup="html">
					<font size="9" isStrikeThrough="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA["Irrevocable Standby Domestic Letter of Credit No. " + $P{documentNumber} + "<br/><br/>" +
$P{purposeOfStandby}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="175" width="504" height="15"/>
				<textElement textAlignment="Justified" markup="html">
					<font size="9" isStrikeThrough="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA["Sir:"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="535" width="504" height="20"/>
				<textElement verticalAlignment="Top">
					<font size="9" isUnderline="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA["Name of Bank/Financial Institution: " + $P{bank} + " - " + $P{bankBranch}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="555" width="504" height="20"/>
				<textElement verticalAlignment="Top">
					<font size="9" isUnderline="false" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression><![CDATA["Date: " + $V{PROCESS_DATE}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
